# COBOL プログラム設計書 テンプレート

## 1. 基本情報

- プログラムの形態：
- プログラム名：
- モジュール名：

## 2. プログラムの目的と機能概要

## 3. 使用ファイル一覧（入出力）

- ファイル名
- ファイル論理名
- 使用区分（入力／出力）

## 4. 使用データ項目

### データモデル

| テーブル名 | 項目名 | 項目論理名 | 定義 (COBOL) | DB 上の型 | 用途・説明 |
| ---------- | ------ | ---------- | ------------ | --------- | ---------- |
|            |        |            |              |           |            |

#### インデックス・レート

| 項目名 | 項目論理名 | 定義 (COBOL) | DB 上の型 | 用途・説明 |
| ------ | ---------- | ------------ | --------- | ---------- |
|        |            |              |           |            |

#### 定数

| 項目名 | 項目論理名 | 定義 (COBOL) | 初期値 | DB 上の型 | 用途・説明 |
| ------ | ---------- | ------------ | ------ | --------- | ---------- |
|        |            |              |        |           |            |

#### 一時変数

| 項目名 | 項目論理名 | 定義 (COBOL) | DB 上の型 | 用途・説明 |
| ------ | ---------- | ------------ | --------- | ---------- |
|        |            |              |           |            |

#### リンクセクション変数

| 項目名 | 項目論理名 | 定義 (COBOL) | DB 上の型 | 用途・説明 |
| ------ | ---------- | ------------ | --------- | ---------- |
|        |            |              |           |            |

### 入力データ

| エンティティ | 項目名 | 項目論理名 | 定義 (COBOL) | DB 上の型 | 用途・説明 |
| ------------ | ------ | ---------- | ------------ | --------- | ---------- |
|              |        |            |              |           |            |

### 出力データ

| エンティティ | 項目名 | 項目論理名 | 定義 (COBOL) | DB 上の型 | 用途・説明 |
| ------------ | ------ | ---------- | ------------ | --------- | ---------- |
|              |        |            |              |           |            |

## 5. プログラム構造・モジュール設計

- プログラム全体の構造（メインプログラム、サブルーチン、 COPY 句など）
- モジュールの役割・入出力・処理概要

## 6. 詳細処理

1. [処理名]
   - 概要：
   - 使用するデータ項目：
     - 
   - 使用する定数：
     - 
   - 演算式・ロジック：
     - 
   - 備考：

以下は入力例。

1. CALCULATE-PURCHASE-AMOUNT
  - 概要：割引・ポイントを含めた商品購入金額を計算する
  - 使用するデータ項目：
    - 商品単価 (UNIT-PRICE) 、購入数量 (QUANTITY) 、 キャンペーンコード (CAMPAIGN-CODE)、利用ポイント (POINT)
  - 使用する定数：
    - 消費税率 (TAX-RATE)
  - 演算式・ロジック：
    - 小計を計算：商品単価 × 購入数量 ＝ 小計
    - キャンペーンコードが空でない場合、割引額を計算
      - サブルーチン「割引額計算 (CALCULATE-DISCOUNTED-AMOUT) 」を呼び出す
    - 割引後金額を計算：割引後金額 = 小計 - 割引額
    - 利用ポイントが 0 より大きい場合、ポイント適用済み価格を計算
      - 例）利用ポイントが 100 ならば、ポイント適用済み価格 = 割引後金額 - 100
    - 最終支払金額を計算：最終支払金額 = ポイント適用済み価格 * (1 + 消費税率)

上記は入力例。

## 7. エラー・例外処理仕様

- エラー条件
- エラー処理内容

## 8. 呼び出し関係／外部インターフェース

- 呼び出し元プログラム
- 呼び出し区分 (CALL / SHELL)
- パラメーター
